const eventDetails = {
    event1: {
        title: 'üñ§„ÄåÊÑõÁöÑÊöóÊÆ∫‰∫ã‰ª∂üå±„Äç',
        time: 'Ë®òÈåÑÊôÇÈñìÔºöÊú™Áü•',
        description: '„Ç∑„É≥„Éá„Ç§È†òÈ§ä‰∫Ü‰∏ÄÁõÜÊìöË™™„ÄåÁµïÂ∞ç‰∏çÊúÉÊ≠ª„ÄçÁöÑÂ§öËÇâÊ§çÁâ©‚Äî‚Äî‰ªô‰∫∫ÊéåÔºå‰∏ÄÁ®ÆÁêÜË´ñ‰∏äÊîæÁΩÆ‰∏çÁÆ°‰πüËÉΩÂ≠òÊ¥ªÁöÑÊ§çÁâ©ÔºåÂú®ÂÖ∂ÁÖßÊñô‰∏ãÂÆ£ÂëäÁîüÂëΩÁµÇÁµê„ÄÇÁÑ∂ËÄåÔºåÂá∫ÊñºÂ∞çÊñ∞ÁîüÂëΩÁöÑÈÅéÂ∫¶ÈóúÊÑõÔºåÂ•πË™çÁÇ∫ÁîüÈï∑Âú®Ê≤ôÊº†ÁöÑ‰ªô‰∫∫Êéå‰∏ÄÂÆöÂæàÁº∫Ê∞¥ÔºåÂõ†Ê≠§Â†ÖÊåÅÊØèÊó•Êó©„ÄÅÂçà„ÄÅÊôö‰∏âÊ¨°ÁÇ∫ÂÖ∂ÊæÜÊ∞¥„ÄÇ‰∏ÄÈÄ±ÂæåÔºåË©≤‰ªô‰∫∫ÊéåÂõ†Ê†πÈÉ®ËÖêÁàõËÄåÂÆ£ÂëäÊûØËêé„ÄÇÊ≠§‰∫ã‰ª∂ÊàêÁÇ∫ÂúíËóùÂ≠∏ÊúÉÂÇ≥Ë™™‰∏≠ÁöÑ„ÄåÊÑõÁöÑÊöóÊÆ∫‰∫ã‰ª∂„Äç„ÄÇ',
        conversations: [
            { speaker: 'ÈªíÂ∞æ', text: '„ÅÇ„Çå„ÅÇ„Çå...Ë∫´ÁÇ∫ÂúíËóùÂ≠∏ÊúÉÁöÑÊàêÂì°ÔºåÂ±ÖÁÑ∂ËÉΩË¶™ÊâãÂ∞áÁîüÂëΩÂäõÊúÄÈ†ëÂº∑ÁöÑ‰ªô‰∫∫ÊéåÁµ¶„ÄéËôïÊ±∫„ÄèÊéâÔºåÈÄôÂèØ‰∏çÊòØ‰∏ÄËà¨‰∫∫ËÉΩËæ¶Âà∞ÁöÑÊâçËÉΩÂïäÔΩû', type: 'kuroo' },
            { speaker: '„Ç∑„É≥„Éá„Ç£', text: 'Êàë...Êàë‰∏çÊòØÊïÖÊÑèÁöÑÔºÅÊàëÂè™ÊòØ...ÊÄïÂÆÉÂè£Ê∏¥„ÄÇËÄå‰∏îÊàëÁúã„ÄäÂúíËóùÊñ∞ÊâãÊåáÂçó„Äã‰∏≠‰∏äË™™Ê§çÁâ©ÈúÄË¶ÅÈôΩÂÖâÂíåÊ∞¥ÔºåÊàëÂ∞±ÊÉ≥Áµ¶ÂÆÉÂ§ö‰∏ÄÈªû...ÂÜçÂ§ö‰∏ÄÈªûÁöÑÈóúÂøÉÂòõÔºÅ', type: 'cindy' }
        ]
    },
    event2: {
        title: 'üñ§„ÄåÂúñÊõ∏È§®Êõ∏Êú¨Á©∫Ë•≤‰∫ã‰ª∂üìï„Äç',
        time: 'Ë®òÈåÑÊôÇÈñìÔºöÂçà‰ºëÊôÇÈñì',
        description: '„Ç∑„É≥„Éá„Ç§Âú®ÂúñÊõ∏È§®Â∞ãÊâæË≥áÊñô„ÄÇÁï∂Â•πË©¶ÂúñÂæûÈ´òÂ±§Êõ∏Êû∂‰∏äÂèñ‰∏ã‰∏ÄÊú¨ÂéöÈáçÁöÑÁ≤æË£ùÂúñÈëëÊôÇÔºåÂõ†Ë∫´È´ò‰∏çË∂≥Â∞éËá¥ÊªëËêΩÔºåÂÖ∂‰∏≠‰∏ÄÊú¨Á≤æÊ∫ñÂú∞Á†∏‰∏≠‰∫ÜÂ•πËá™Â∑±ÁöÑÈ†≠È†Ç„ÄÇ',
        conversations: [
            { speaker: 'ÈªíÂ∞æ', text: 'ÂïäÔºåÈÇ£Ê¨°Âïä„ÄÇÊàëÂú®ÁúãÊõ∏ÁúãÂæóÊ≠£ÂÖ•Á•ûÔºåÂ∞±ËÅΩÂà∞„ÄéÂíö„ÄèÁöÑ‰∏ÄËÅ≤ÊÇ∂Èüø„ÄÇ‰∏ÄÁúãÂ∞±ÁôºÁèæÊüêÂÄãÂ∞èË≤ìÊ≠£Êä±ËëóÈ†≠ÔºåËπ≤Âú®Âú∞‰∏ä„ÄÇ', type: 'kuroo' },
            { speaker: '„Ç∑„É≥„Éá„Ç£', text: 'ÊàëÁúãÂà∞ÈªíÂ∞æ„Åï„ÇìÂú®ÂæàÂ∞àÂøÉÂú∞ÁúãÊõ∏Ôºå‰∏çÊÉ≥ÊâìÊìæ‰Ω†Âòõ...', type: 'cindy' }
        ]
    },
    event3: {
        title: 'üñ§„ÄåÂ∑¶ËÖ≥ÁöÑÊÑõÈÅéÊñºÊ≤âÈáç„Äç',
        time: 'Ë®òÈåÑÊôÇÈñìÔºöÈªëÂ∞æÁîüÊó•(11Êúà17Êó•)',
        description: 'Âú®ÁîüÊó•Áï∂Â§©Ôºå„Ç∑„É≥„Éá„Ç§ÈÄÅÁµ¶ÈªëÂ∞æÂÖ©ÂÄãË≠∑ËÜù„ÄÇÁÑ∂ËÄåÔºåÁï∂ÈªëÂ∞æÊâìÈñãÁ¶ÆÁõíÂæåÔºåÂçªÁôºÁèæË£°Èù¢ÈùúÈùúÂú∞Ë∫∫ËëóÂÖ©ÂÄã‚Äî‚ÄîÂåÖË£ù„ÄÅË®≠Ë®à„ÄÅÂûãËôüÂÆåÂÖ®‰∏ÄËá¥ÁöÑ„ÄåÂ∑¶ËÖ≥Â∞àÁî®Ë≠∑ËÜù„Äç„ÄÇ',
        conversations: [
            { speaker: 'ÈªíÂ∞æ', text: 'ÊàëÊãøËµ∑Âè¶‰∏ÄÂÄã...‰∏äÈù¢ÈÇÑÊòØÂÄã„ÄéL„Äè„ÄÇÊàëÊòØË¶ÅÈÄ≤ÂåñÊàêÊúâÂÖ©Ê¢ùÂ∑¶ËÖøÁöÑÁîüÁâ©ÂóéÔºü', type: 'kuroo' },
            { speaker: '„Ç∑„É≥„Éá„Ç£', text: 'Êàë„ÄÅÊàëÁúüÁöÑ‰∏çÊòØÊïÖÊÑèÁöÑÔºÅË≤®Êû∂‰∏äÂ∑¶ËÖ≥ÂíåÂè≥ËÖ≥ÁöÑË≠∑ËÜùÊòØÊîæÂú®‰∏ÄËµ∑ÁöÑ...', type: 'cindy' },
            { speaker: 'ÈªíÂ∞æ', text: 'ÊîæÂøÉÔºåÂè¶‰∏ÄÂÄã...Â∞±Áï∂‰ΩúÂÇôÁî®Âêß„ÄÇ', type: 'kuroo' }
        ]
    }
};

function openModal(eventId) {
    const modal = document.getElementById('eventModal');
    const modalBody = document.getElementById('modalBody');
    const event = eventDetails[eventId];
    
    if(!event) return;

    let conversationsHTML = '';
    event.conversations.forEach(conv => {
        const avatarSrc = conv.type === 'kuroo' 
            ? '/Users/cindy/Desktop/Design‚ú®/KurooCin Web/KurooQQ.png' 
            : '/Users/cindy/Desktop/Design‚ú®/KurooCin Web/CindyAQQ(Transparent).png';
            
        conversationsHTML += `
            <div class="conversation ${conv.type}">
                <div class="conversation-avatar">
                        <img src="${avatarSrc}" alt="${conv.type}">
                </div>
                <div class="conversation-content">
                    <div class="conversation-name">${conv.speaker}</div>
                    <div class="conversation-text">${conv.text}</div>
                </div>
            </div>
        `;
    });

    modalBody.innerHTML = `
        <h2 style="font-size: 2.2rem; font-weight: 700; margin-bottom: 20px; color: #E8B4D9;">${event.title}</h2>
        <p style="font-size: 1.1rem; color: #999; margin-bottom: 25px;">${event.time}</p>
        <div style="background: linear-gradient(135deg, rgba(232, 180, 217, 0.1) 0%, rgba(180, 167, 214, 0.1) 100%); padding: 30px; border-radius: 15px; margin-bottom: 30px; line-height: 1.8; font-size: 1.2rem;">
            ${event.description}
        </div>
        <h3 style="font-size: 1.5rem; font-weight: 600; margin-bottom: 25px;">Â∞çË©±Ë®òÈåÑ</h3>
        <div class="event-conversations" style="display: flex; flex-direction: column; gap: 20px;">
            ${conversationsHTML}
        </div>
    `;

    modal.classList.add('active');
}

function closeModal() {
    document.getElementById('eventModal').classList.remove('active');
}

window.onclick = function(event) {
    const modal = document.getElementById('eventModal');
    if (event.target === modal) {
        closeModal();
    }
};

function toggleDarkMode() {
    document.body.classList.toggle('dark-mode');
    const icon = document.getElementById('darkModeIcon');
    icon.textContent = document.body.classList.contains('dark-mode') ? '‚òÄÔ∏è' : 'üåô';
}

function scrollToTop() {
    window.scrollTo({ top: 0, behavior: 'smooth' });
}

function scrollToId(elementId) {
    const element = document.getElementById(elementId);
    if (element) {
        const offset = 160; /* Adjusted for larger header */
        const elementPosition = element.getBoundingClientRect().top;
        const offsetPosition = elementPosition + window.pageYOffset - offset;

        window.scrollTo({
            top: offsetPosition,
            behavior: "smooth"
        });
    }
}

window.addEventListener('scroll', () => {
    const scrollButton = document.querySelector('.scroll-to-top');
    if (window.pageYOffset > 300) {
        scrollButton.classList.add('visible');
    } else {
        scrollButton.classList.remove('visible');
    }
});

document.addEventListener('DOMContentLoaded', () => {
    const observerOptions = {
        root: null,
        rootMargin: '0px',
        threshold: 0.1
    };

    const observer = new IntersectionObserver((entries, observer) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.classList.add('visible');
            } else {
                entry.target.classList.remove('visible');
            }
        });
    }, observerOptions);

    const timelineEvents = document.querySelectorAll('.timeline-event');
    timelineEvents.forEach(event => {
        observer.observe(event);
    });
});

document.querySelectorAll('.tool-btn').forEach(btn => {
    btn.addEventListener('click', function() {
        document.querySelectorAll('.tool-btn').forEach(b => b.classList.remove('active'));
        this.classList.add('active');
    });
});
